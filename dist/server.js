!function(n){function e(r){if(_[r])return _[r].exports;var t=_[r]={i:r,l:!1,exports:{}};return n[r].call(t.exports,t,t.exports,e),t.l=!0,t.exports}var _={};return e.m=n,e.c=_,e.i=function(n){return n},e.d=function(n,e,_){Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:_})},e.n=function(n){var _=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(_,"a",_),_},e.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},e.p="",e(e.s=25)}([function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__scene__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__logger__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__server__ = __webpack_require__(16);\n/* unused harmony export MODE_DEV */\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "b", function() { return __WEBPACK_IMPORTED_MODULE_0__scene__["a"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "c", function() { return __WEBPACK_IMPORTED_MODULE_0__scene__["b"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "a", function() { return __WEBPACK_IMPORTED_MODULE_1__logger__["a"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "d", function() { return __WEBPACK_IMPORTED_MODULE_2__server__["a"]; });\n\n\n\n\nvar MODE_DEV = "production" === \'development\';\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/config/index.js\n// module id = 0\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/config/index.js?')},function(module,exports,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return GAME_TYPE_WALL; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"b\", function() { return GAME_TYPE_BOX; });\nvar GAME_TYPE_WALL = 'WALL';\nvar GAME_TYPE_BOX = 'BOX';\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/physic/entities/constants.js\n// module id = 1\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/physic/entities/constants.js?")},function(module,exports){eval("module.exports = require('p2');\n\n//////////////////\n// WEBPACK FOOTER\n// external \"require('p2')\"\n// module id = 2\n// module chunks = 0\n\n//# sourceURL=webpack:///external_%22require('p2')%22?")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_winston__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_winston___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_winston__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__(0);\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_winston___default.a.level = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* LOG_LEVEL */];\n\n/* harmony default export */ exports["a"] = __WEBPACK_IMPORTED_MODULE_0_winston___default.a;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/logger.js\n// module id = 3\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/logger.js?')},function(module,exports,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(exports, \"b\", function() { return TABLES; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return DEFAULT_OPTIONS; });\nvar TABLES = {\n  PLAYERS: 'players'\n};\n\nvar DEFAULT_OPTIONS = {\n  DB: {\n    HOST: 'localhost',\n    PORT: 28015,\n    DATABASE: 'pongmmo'\n  }\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/db/constants.js\n// module id = 4\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/db/constants.js?")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rethinkdb__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rethinkdb___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_rethinkdb__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__logger__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants__ = __webpack_require__(4);\nvar _this = this;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }\n\n\n\n\n\nvar DB_OPTIONS = {\n  host: process.env.DB_HOST || __WEBPACK_IMPORTED_MODULE_2__constants__["a" /* DEFAULT_OPTIONS */].DB.HOST,\n  port: process.env.DB_PORT || __WEBPACK_IMPORTED_MODULE_2__constants__["a" /* DEFAULT_OPTIONS */].DB.PORT,\n  database: process.env.DB_DATABASE || __WEBPACK_IMPORTED_MODULE_2__constants__["a" /* DEFAULT_OPTIONS */].DB.DATABASE\n};\n\n__WEBPACK_IMPORTED_MODULE_1__logger__["a" /* default */].debug(\'"options": %j\', { db: DB_OPTIONS });\n\nvar initiated = void 0;\nvar conn = void 0;\n\n/* harmony default export */ exports["a"] = _asyncToGenerator(regeneratorRuntime.mark(function _callee2() {\n  return regeneratorRuntime.wrap(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!initiated) {\n            initiated = new Promise(function () {\n              var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee(resolve) {\n                var dbs, promises, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, table;\n\n                return regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        _context.next = 2;\n                        return __WEBPACK_IMPORTED_MODULE_0_rethinkdb___default.a.connect(DB_OPTIONS);\n\n                      case 2:\n                        conn = _context.sent;\n                        _context.next = 5;\n                        return __WEBPACK_IMPORTED_MODULE_0_rethinkdb___default.a.dbList().run(conn);\n\n                      case 5:\n                        dbs = _context.sent;\n\n\n                        __WEBPACK_IMPORTED_MODULE_1__logger__["a" /* default */].debug(\'[DB] Creating and connection to database %s\', DB_OPTIONS.database);\n\n                        if (!dbs.includes(DB_OPTIONS.database)) {\n                          _context.next = 10;\n                          break;\n                        }\n\n                        _context.next = 10;\n                        return __WEBPACK_IMPORTED_MODULE_0_rethinkdb___default.a.dbDrop(DB_OPTIONS.database).run(conn);\n\n                      case 10:\n                        _context.next = 12;\n                        return __WEBPACK_IMPORTED_MODULE_0_rethinkdb___default.a.dbCreate(DB_OPTIONS.database).run(conn);\n\n                      case 12:\n                        _context.next = 14;\n                        return conn.use(DB_OPTIONS.database);\n\n                      case 14:\n                        promises = [];\n\n                        __WEBPACK_IMPORTED_MODULE_1__logger__["a" /* default */].debug(\'[DB] Creating tables :\');\n                        _iteratorNormalCompletion = true;\n                        _didIteratorError = false;\n                        _iteratorError = undefined;\n                        _context.prev = 19;\n                        for (_iterator = Object.values(__WEBPACK_IMPORTED_MODULE_2__constants__["b" /* TABLES */])[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                          table = _step.value;\n\n                          __WEBPACK_IMPORTED_MODULE_1__logger__["a" /* default */].debug(\'[DB] \\t- %s\', table);\n                          promises.push(__WEBPACK_IMPORTED_MODULE_0_rethinkdb___default.a.tableCreate(table).run(conn));\n                        }\n\n                        _context.next = 27;\n                        break;\n\n                      case 23:\n                        _context.prev = 23;\n                        _context.t0 = _context[\'catch\'](19);\n                        _didIteratorError = true;\n                        _iteratorError = _context.t0;\n\n                      case 27:\n                        _context.prev = 27;\n                        _context.prev = 28;\n\n                        if (!_iteratorNormalCompletion && _iterator.return) {\n                          _iterator.return();\n                        }\n\n                      case 30:\n                        _context.prev = 30;\n\n                        if (!_didIteratorError) {\n                          _context.next = 33;\n                          break;\n                        }\n\n                        throw _iteratorError;\n\n                      case 33:\n                        return _context.finish(30);\n\n                      case 34:\n                        return _context.finish(27);\n\n                      case 35:\n                        _context.next = 37;\n                        return Promise.all(promises);\n\n                      case 37:\n                        resolve();\n\n                      case 38:\n                      case \'end\':\n                        return _context.stop();\n                    }\n                  }\n                }, _callee, _this, [[19, 23, 27, 35], [28,, 30, 34]]);\n              }));\n\n              return function (_x) {\n                return _ref2.apply(this, arguments);\n              };\n            }());\n          }\n\n          _context2.next = 3;\n          return initiated;\n\n        case 3:\n          return _context2.abrupt(\'return\', conn);\n\n        case 4:\n        case \'end\':\n          return _context2.stop();\n      }\n    }\n  }, _callee2, _this);\n}));\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/db/init.js\n// module id = 5\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/db/init.js?')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_p2__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_p2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_p2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants__ = __webpack_require__(1);\n/* harmony export (binding) */ __webpack_require__.d(exports, "a", function() { return createWalls; });\n\n\n\nvar WALL_SIZE = 0.1;\n\nvar createWall = function createWall(x, y, width, height) {\n  var shape = new __WEBPACK_IMPORTED_MODULE_0_p2___default.a.Box({ width: width, height: height });\n  var body = new __WEBPACK_IMPORTED_MODULE_0_p2___default.a.Body({ mass: 0, position: [x, y] });\n\n  body.addShape(shape);\n  body.gameType = __WEBPACK_IMPORTED_MODULE_1__constants__["a" /* GAME_TYPE_WALL */];\n\n  return body;\n};\n\nvar createWalls = function createWalls(width, height) {\n  return [\n  // In p2.js : x,y of a body represents the body center (not top,left)\n  createWall(width / 2, 0, width, WALL_SIZE), // top\n  createWall(0, height / 2, WALL_SIZE, height), // left\n  createWall(width / 2, height, width, WALL_SIZE), // bottom\n  createWall(width, height / 2, WALL_SIZE, height)];\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/physic/entities/walls.js\n// module id = 6\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/physic/entities/walls.js?')},function(module,exports){eval("module.exports = require('rethinkdb');\n\n//////////////////\n// WEBPACK FOOTER\n// external \"require('rethinkdb')\"\n// module id = 7\n// module chunks = 0\n\n//# sourceURL=webpack:///external_%22require('rethinkdb')%22?")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__states__ = __webpack_require__(17);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__states__["a"]; });\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/constants/index.js\n// module id = 8\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/constants/index.js?')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__init__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__player__ = __webpack_require__(18);\n\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__init__["a"]; });\n\n\n/* harmony reexport (binding) */ __webpack_require__.d(exports, "b", function() { return __WEBPACK_IMPORTED_MODULE_1__player__["a"]; });\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/db/index.js\n// module id = 9\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/db/index.js?')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__player__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__socketio__ = __webpack_require__(20);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "b", function() { return __WEBPACK_IMPORTED_MODULE_0__player__["a"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "c", function() { return __WEBPACK_IMPORTED_MODULE_0__player__["b"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "a", function() { return __WEBPACK_IMPORTED_MODULE_1__socketio__["a"]; });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/events/index.js\n// module id = 10\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/events/index.js?')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__engine__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__entities__ = __webpack_require__(23);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__engine__["a"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "b", function() { return __WEBPACK_IMPORTED_MODULE_0__engine__["b"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "c", function() { return __WEBPACK_IMPORTED_MODULE_0__engine__["c"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "d", function() { return __WEBPACK_IMPORTED_MODULE_1__entities__["a"]; });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/physic/index.js\n// module id = 11\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/physic/index.js?')},function(module,exports){eval("module.exports = require('babel-polyfill');\n\n//////////////////\n// WEBPACK FOOTER\n// external \"require('babel-polyfill')\"\n// module id = 12\n// module chunks = 0\n\n//# sourceURL=webpack:///external_%22require('babel-polyfill')%22?")},function(module,exports){eval("module.exports = require('socket.io');\n\n//////////////////\n// WEBPACK FOOTER\n// external \"require('socket.io')\"\n// module id = 13\n// module chunks = 0\n\n//# sourceURL=webpack:///external_%22require('socket.io')%22?")},function(module,exports,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return LOG_LEVEL; });\nvar LOG_LEVEL = process.env.LOG_LEVEL || 'debug';\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/config/logger.js\n// module id = 14\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/config/logger.js?")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(exports, "a", function() { return WIDTH; });\n/* harmony export (binding) */ __webpack_require__.d(exports, "b", function() { return HEIGHT; });\nvar WIDTH = 8;\nvar HEIGHT = 6;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/config/scene.js\n// module id = 15\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/config/scene.js?')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(exports, "a", function() { return SERVER_PORT; });\nvar SERVER_PORT = 9000;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/config/server.js\n// module id = 16\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/config/server.js?')},function(module,exports,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return STATE_START_SERVER; });\nvar STATE_START_SERVER = 'START_SERVER';\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/constants/states.js\n// module id = 17\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/constants/states.js?")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rethinkdb__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rethinkdb___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_rethinkdb__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__init__ = __webpack_require__(5);\nvar _this = this;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }\n\n\n\n\n\nvar table = __WEBPACK_IMPORTED_MODULE_0_rethinkdb___default.a.table(__WEBPACK_IMPORTED_MODULE_1__constants__["b" /* TABLES */].PLAYERS);\n\n/* harmony default export */ exports["a"] = {\n  getAll: function () {\n    var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n      var cursor;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = table;\n              _context.next = 3;\n              return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__init__["a" /* default */])();\n\n            case 3:\n              _context.t1 = _context.sent;\n              _context.next = 6;\n              return _context.t0.run.call(_context.t0, _context.t1);\n\n            case 6:\n              cursor = _context.sent;\n              _context.next = 9;\n              return cursor.toArray();\n\n            case 9:\n              return _context.abrupt(\'return\', _context.sent);\n\n            case 10:\n            case \'end\':\n              return _context.stop();\n          }\n        }\n      }, _callee, _this);\n    }));\n\n    return function getAll() {\n      return _ref.apply(this, arguments);\n    };\n  }(),\n\n  update: function () {\n    var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(player) {\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.t0 = table.update(player);\n              _context2.next = 3;\n              return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__init__["a" /* default */])();\n\n            case 3:\n              _context2.t1 = _context2.sent;\n              _context2.next = 6;\n              return _context2.t0.run.call(_context2.t0, _context2.t1);\n\n            case 6:\n              return _context2.abrupt(\'return\', _context2.sent);\n\n            case 7:\n            case \'end\':\n              return _context2.stop();\n          }\n        }\n      }, _callee2, _this);\n    }));\n\n    return function update(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(),\n\n  onChange: function () {\n    var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3(cb) {\n      var cursor;\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.t0 = table.changes();\n              _context3.next = 3;\n              return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__init__["a" /* default */])();\n\n            case 3:\n              _context3.t1 = _context3.sent;\n              _context3.next = 6;\n              return _context3.t0.run.call(_context3.t0, _context3.t1);\n\n            case 6:\n              cursor = _context3.sent;\n              _context3.next = 9;\n              return cursor.eachAsync(function (p) {\n                cb(p.new_val);\n              });\n\n            case 9:\n              return _context3.abrupt(\'return\', _context3.sent);\n\n            case 10:\n            case \'end\':\n              return _context3.stop();\n          }\n        }\n      }, _callee3, _this);\n    }));\n\n    return function onChange(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(),\n\n  insert: function () {\n    var _ref4 = _asyncToGenerator(regeneratorRuntime.mark(function _callee4(player) {\n      return regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.t0 = table.insert(player);\n              _context4.next = 3;\n              return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__init__["a" /* default */])();\n\n            case 3:\n              _context4.t1 = _context4.sent;\n              _context4.next = 6;\n              return _context4.t0.run.call(_context4.t0, _context4.t1);\n\n            case 6:\n              return _context4.abrupt(\'return\', _context4.sent);\n\n            case 7:\n            case \'end\':\n              return _context4.stop();\n          }\n        }\n      }, _callee4, _this);\n    }));\n\n    return function insert(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }()\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/db/player.js\n// module id = 18\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/db/player.js?')},function(module,exports,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(exports, \"b\", function() { return UPDATE_PLAYER; });\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return SET_PLAYERS; });\nvar UPDATE_PLAYER = 'UPDATE_PLAYER';\nvar SET_PLAYERS = 'SET_PLAYERS';\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/events/player.js\n// module id = 19\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/events/player.js?")},function(module,exports,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return CONNECTION; });\nvar CONNECTION = 'connection';\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/events/socketio.js\n// module id = 20\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/events/socketio.js?")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_p2__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_p2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_p2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__entities_walls__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__(0);\n/* harmony export (binding) */ __webpack_require__.d(exports, "c", function() { return addBodies; });\n/* harmony export (binding) */ __webpack_require__.d(exports, "b", function() { return init; });\n/* harmony export (binding) */ __webpack_require__.d(exports, "a", function() { return tick; });\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n// import { GAME_TYPE_WALL, GAME_TYPE_BOX } from \'./entities\'\n\n\n\nvar world = void 0;\n// let ticks = 0\n\nvar addBodies = function addBodies() {\n  for (var _len = arguments.length, bodies = Array(_len), _key = 0; _key < _len; _key++) {\n    bodies[_key] = arguments[_key];\n  }\n\n  bodies.forEach(function (b) {\n    return world.addBody(b);\n  });\n\n  if (bodies.length === 1) return bodies[0];\n  return bodies;\n};\n\nvar init = function init() {\n  world = new __WEBPACK_IMPORTED_MODULE_0_p2___default.a.World({\n    gravity: [0, 10]\n  });\n\n  world.islandSplit = true;\n  world.sleepMode = __WEBPACK_IMPORTED_MODULE_0_p2___default.a.World.ISLAND_SLEEPING;\n  world.solver.iterations = 20;\n  world.solver.tolerance = 0.001;\n  world.setGlobalStiffness(1e4);\n\n  addBodies.apply(undefined, _toConsumableArray(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__entities_walls__["a" /* createWalls */])(__WEBPACK_IMPORTED_MODULE_2__config__["b" /* WIDTH */], __WEBPACK_IMPORTED_MODULE_2__config__["c" /* HEIGHT */])));\n\n  return world;\n};\n\nvar lastTime = void 0;\nvar maxSubSteps = 2; // Max physics ticks per render frame\nvar fixedDeltaTime = 1 / 60; // Physics "tick" delta time\nvar tick = function tick() {\n  var time = new Date().getTime();\n  var delta = lastTime ? (time - lastTime) / 1000 : 0;\n  lastTime = time;\n  // Make sure the time delta is not too big (can happen if user switches browser tab)\n  delta = Math.min(1 / 10, delta);\n\n  // Move physics bodies forward in time\n  world.step(fixedDeltaTime, delta, maxSubSteps);\n\n  // Debug purpose\n  /* ticks += 1\n  console.log(\'Bodies\', ticks, {\n    walls: world.bodies.filter(b => b.gameType === GAME_TYPE_WALL).map(b => b.position),\n    boxes: world.bodies.filter(b => b.gameType === GAME_TYPE_BOX).map(b => b.position),\n  }) */\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/physic/engine.js\n// module id = 21\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/physic/engine.js?')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_p2__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_p2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_p2__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants__ = __webpack_require__(1);\n/* harmony export (binding) */ __webpack_require__.d(exports, "a", function() { return createBox; });\n\n\n\nvar SIZE = 0.3;\n\nvar createBox = function createBox(x, y) {\n  var shape = new __WEBPACK_IMPORTED_MODULE_0_p2___default.a.Box({ width: SIZE, height: SIZE });\n  var body = new __WEBPACK_IMPORTED_MODULE_0_p2___default.a.Body({ mass: 1, position: [x, y] });\n\n  body.addShape(shape);\n  body.gameType = __WEBPACK_IMPORTED_MODULE_1__constants__["b" /* GAME_TYPE_BOX */];\n\n  return body;\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/physic/entities/box.js\n// module id = 22\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/physic/entities/box.js?')},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__box__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__walls__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants__ = __webpack_require__(1);\n/* harmony namespace reexport (by used) */ __webpack_require__.d(exports, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__box__["a"]; });\n/* unused harmony namespace reexport */\n/* unused harmony namespace reexport */\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/physic/entities/index.js\n// module id = 23\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/physic/entities/index.js?')},function(module,exports){eval("module.exports = require('winston');\n\n//////////////////\n// WEBPACK FOOTER\n// external \"require('winston')\"\n// module id = 24\n// module chunks = 0\n\n//# sourceURL=webpack:///external_%22require('winston')%22?")},function(module,exports,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_polyfill__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_polyfill___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_polyfill__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_socket_io__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_socket_io___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_socket_io__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__db__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__events__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__physic__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__logger__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__constants__ = __webpack_require__(8);\nvar _this = this;\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }\n\n\n\n\n\n\n\n\n\n\nvar io = __WEBPACK_IMPORTED_MODULE_1_socket_io___default()(__WEBPACK_IMPORTED_MODULE_2__config__["d" /* SERVER_PORT */]);\nvar NAMES = [\'Pierre\', \'Charles\', \'Yvonne\', \'Jules\', \'Maxime\', \'Florent\', \'Angéline\', \'Julie\'];\nvar rand = function rand(min, max) {\n  return Math.floor(Math.random() * max + min);\n};\nvar randPos = function randPos(min, max) {\n  return Math.random() * (max - min) + min;\n};\n\nvar start = false;\n\nvar physicLoop = function () {\n  var _ref = _asyncToGenerator(regeneratorRuntime.mark(function _callee() {\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (start) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\'return\');\n\n          case 2:\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__physic__["a" /* tick */])();\n\n          case 3:\n          case \'end\':\n            return _context.stop();\n        }\n      }\n    }, _callee, _this);\n  }));\n\n  return function physicLoop() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar run = function () {\n  var _ref2 = _asyncToGenerator(regeneratorRuntime.mark(function _callee3() {\n    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            __WEBPACK_IMPORTED_MODULE_6__logger__["a" /* default */].info(\'Server listen on port \' + __WEBPACK_IMPORTED_MODULE_2__config__["d" /* SERVER_PORT */] + \'...\');\n            __WEBPACK_IMPORTED_MODULE_6__logger__["a" /* default */].info(\'Entering in \' + __WEBPACK_IMPORTED_MODULE_7__constants__["a" /* STATE_START_SERVER */] + \' state...\');\n            _context3.next = 4;\n            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__db__["a" /* default */])();\n\n          case 4:\n\n            __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__physic__["b" /* init */])();\n            setInterval(physicLoop, 1 / 60 * 1000);\n\n            io.on(__WEBPACK_IMPORTED_MODULE_4__events__["a" /* CONNECTION */], function () {\n              var _ref3 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(socket) {\n                var newPlayer;\n                return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        newPlayer = {\n                          name: NAMES[rand(0, NAMES.length - 1)],\n                          x: randPos(1, 7),\n                          y: randPos(1, 6)\n                        };\n\n\n                        __WEBPACK_IMPORTED_MODULE_3__db__["b" /* player */].insert(newPlayer);\n                        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__physic__["c" /* addBodies */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_5__physic__["d" /* createBox */])(newPlayer.x, newPlayer.y));\n                        start = true;\n\n                        // Connect events\n                        _context2.t0 = socket;\n                        _context2.t1 = __WEBPACK_IMPORTED_MODULE_4__events__["b" /* SET_PLAYERS */];\n                        _context2.next = 8;\n                        return __WEBPACK_IMPORTED_MODULE_3__db__["b" /* player */].getAll();\n\n                      case 8:\n                        _context2.t2 = _context2.sent;\n\n                        _context2.t0.emit.call(_context2.t0, _context2.t1, _context2.t2);\n\n                        __WEBPACK_IMPORTED_MODULE_3__db__["b" /* player */].onChange(function (p) {\n                          return io.emit(__WEBPACK_IMPORTED_MODULE_4__events__["c" /* UPDATE_PLAYER */], p);\n                        });\n                        socket.on(__WEBPACK_IMPORTED_MODULE_4__events__["c" /* UPDATE_PLAYER */], __WEBPACK_IMPORTED_MODULE_3__db__["b" /* player */].update); // Should be checked (for cheating player)\n\n                      case 12:\n                      case \'end\':\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2, _this);\n              }));\n\n              return function (_x) {\n                return _ref3.apply(this, arguments);\n              };\n            }());\n\n          case 7:\n          case \'end\':\n            return _context3.stop();\n        }\n      }\n    }, _callee3, _this);\n  }));\n\n  return function run() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nrun();\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/server.js\n// module id = 25\n// module chunks = 0\n\n//# sourceURL=webpack:///./src/server.js?');
}]);